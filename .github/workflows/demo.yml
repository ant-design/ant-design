name: image-preview

on: [push, pull_request]

jobs:
  image-preview-2:
    name: image-preview-3
    runs-on: ubuntu-latest
    steps:
      - name: cache package-lock.json
        uses: actions/cache@v4
        with:
          path: package-temp-dir
          key: lock-${{ github.sha }}

      - name: create package-lock.json
        run: npm i --package-lock-only --ignore-scripts
      - name: checkout
        uses: actions/checkout@v4
      - name: image-preview-4
        id: report
        env:
          ALI_OSS_AK_ID: ${{ secrets.ALI_OSS_AK_ID }}
          ALI_OSS_AK_SECRET: ${{ secrets.ALI_OSS_AK_SECRET }}
        run: |
          # npm i ali-oss --no-save
          # echo "âœ… Install `ali-oss` Finished"

          echo "ðŸ¤– Uploading"
          node scripts/visual-regression/upload-demo.js
          echo "âœ… Uploaded"