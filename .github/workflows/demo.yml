name: DingTalk Test

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: send to dingtalk
        uses: visiky/dingtalk-release-notify@main
        with:
          DING_TALK_TOKEN: dd88546da75f580089cb9a8849dec0537004583babe2e55b09daddf001b46d03
          notify_title: 'ğŸ”¥ @${{ github.event.discussion.user.login }} åˆ›å»ºäº†è®¨è®ºï¼š${{ github.event.discussion.title }} ${{ github.event.discussion.html_url }}'
          notify_body: '### ğŸ”¥ @afc163 åˆ›å»ºäº†è®¨è®º \r\n ### [${{ github.event.discussion.title }}](${{ github.event.discussion.html_url }}) <hr />'
          notify_footer: '> ğŸ’¬ æ¬¢è¿å‰å¾€ GitHub è¿›è¡Œè®¨è®ºï¼Œç¤¾åŒºå¯èƒ½éœ€è¦ä½ çš„å¸®åŠ©ã€‚'
          at_all: false # whether to ding everybody

      # - name: dingtalk robot message
      #   uses: northwang-lucky/chatbot-webhook-client@v1.1.1
      #   with:
      #     app: DingTalk
      #     # webhook: "https://oapi.dingtalk.com/robot/send?access_token=${{ secrets.DING_TALK_ACCESS_TOKEN }}"
      #     webhook: "https://oapi.dingtalk.com/robot/send?access_token=dd88546da75f580089cb9a8849dec0537004583babe2e55b09daddf001b46d03"
      #     template: >-
      #       {
      #         "msgtype": "markdown",
      #         "markdown": {
      #           "title": "ğŸ”¥ @${{ github.event.discussion.user.login }} åˆ›å»ºäº†è®¨è®ºï¼š${{ github.event.discussion.title }} ${{ github.event.discussion.html_url }}",
      #           "text": "### ğŸ”¥ @${{ github.event.discussion.user.login }} åˆ›å»ºäº†è®¨è®º \n [${{ github.event.discussion.title }}](${{ github.event.discussion.html_url }}) <hr /> \n > ğŸ’¬ æ¬¢è¿å‰å¾€ GitHub è¿›è¡Œè®¨è®ºï¼Œç¤¾åŒºå¯èƒ½éœ€è¦ä½ çš„å¸®åŠ©ã€‚"
      #         }
      #       }
