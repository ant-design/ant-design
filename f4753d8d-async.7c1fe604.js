(("undefined"!=typeof globalThis?globalThis:self).makoChunk_antd=("undefined"!=typeof globalThis?globalThis:self).makoChunk_antd||[]).push([["f4753d8d"],{f4753d8d:function(e,t,r){"use strict";r.d(t,"__esModule",{value:!0}),r.d(t,"diagram",{enumerable:!0,get:function(){return ep;}});var a=r("bed241dc"),o=r("d03ff424"),i=r("8d13cbfb"),n=r("4a9940fd"),c=r("b04a8d7d"),s=r("2bc3de4e"),l=r("f604571d"),d={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},m=n.defaultConfig_default.gitGraph,h=(0,c.__name)(()=>(0,i.cleanAndMerge)({...m,...(0,n.getConfig)().gitGraph}),"getConfig"),$=new o.ImperativeState(()=>{let e=h(),t=e.mainBranchName,r=e.mainBranchOrder;return{mainBranchName:t,commits:new Map,head:null,branchConfig:new Map([[t,{name:t,order:r}]]),branches:new Map([[t,null]]),currBranch:t,direction:"LR",seq:0,options:{}};});function g(){return(0,i.random)({length:7});}function y(e,t){let r=Object.create(null);return e.reduce((e,a)=>{let o=t(a);return r[o]||(r[o]=!0,e.push(a)),e;},[]);}(0,c.__name)(g,"getID"),(0,c.__name)(y,"uniqBy");var u=(0,c.__name)(function(e){$.records.direction=e;},"setDirection"),p=(0,c.__name)(function(e){c.log.debug("options str",e),e=(e=null==e?void 0:e.trim())||"{}";try{$.records.options=JSON.parse(e);}catch(e){c.log.error("error while parsing gitGraph options",e.message);}},"setOptions"),f=(0,c.__name)(function(){return $.records.options;},"getOptions"),x=(0,c.__name)(function(e){let t=e.msg,r=e.id,a=e.type,o=e.tags;c.log.info("commit",t,r,a,o),c.log.debug("Entering commit:",t,r,a,o);let i=h();r=n.common_default.sanitizeText(r,i),t=n.common_default.sanitizeText(t,i),o=null==o?void 0:o.map(e=>n.common_default.sanitizeText(e,i));let s={id:r||$.records.seq+"-"+g(),message:t,seq:$.records.seq++,type:a??d.NORMAL,tags:o??[],parents:null==$.records.head?[]:[$.records.head.id],branch:$.records.currBranch};$.records.head=s,c.log.info("main branch",i.mainBranchName),$.records.commits.has(s.id)&&c.log.warn(`Commit ID ${s.id} already exists`),$.records.commits.set(s.id,s),$.records.branches.set($.records.currBranch,s.id),c.log.debug("in pushCommit "+s.id);},"commit"),b=(0,c.__name)(function(e){let t=e.name,r=e.order;if(t=n.common_default.sanitizeText(t,h()),$.records.branches.has(t))throw Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${t}")`);$.records.branches.set(t,null!=$.records.head?$.records.head.id:null),$.records.branchConfig.set(t,{name:t,order:r}),w(t),c.log.debug("in createBranch");},"branch"),_=(0,c.__name)(e=>{let t=e.branch,r=e.id,a=e.type,o=e.tags,i=h();t=n.common_default.sanitizeText(t,i),r&&(r=n.common_default.sanitizeText(r,i));let s=$.records.branches.get($.records.currBranch),l=$.records.branches.get(t),m=s?$.records.commits.get(s):void 0,y=l?$.records.commits.get(l):void 0;if(m&&y&&m.branch===t)throw Error(`Cannot merge branch '${t}' into itself.`);if($.records.currBranch===t){let e=Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw e.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},e;}if(void 0===m||!m){let e=Error(`Incorrect usage of "merge". Current branch (${$.records.currBranch})has no commits`);throw e.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["commit"]},e;}if(!$.records.branches.has(t)){let e=Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw e.hash={text:`merge ${t}`,token:`merge ${t}`,expected:[`branch ${t}`]},e;}if(void 0===y||!y){let e=Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw e.hash={text:`merge ${t}`,token:`merge ${t}`,expected:['"commit"']},e;}if(m===y){let e=Error('Incorrect usage of "merge". Both branches have same head');throw e.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},e;}if(r&&$.records.commits.has(r)){let e=Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom id");throw e.hash={text:`merge ${t} ${r} ${a} ${null==o?void 0:o.join(" ")}`,token:`merge ${t} ${r} ${a} ${null==o?void 0:o.join(" ")}`,expected:[`merge ${t} ${r}_UNIQUE ${a} ${null==o?void 0:o.join(" ")}`]},e;}let u={id:r||`${$.records.seq}-${g()}`,message:`merged branch ${t} into ${$.records.currBranch}`,seq:$.records.seq++,parents:null==$.records.head?[]:[$.records.head.id,l||""],branch:$.records.currBranch,type:d.MERGE,customType:a,customId:!!r,tags:o??[]};$.records.head=u,$.records.commits.set(u.id,u),$.records.branches.set($.records.currBranch,u.id),c.log.debug($.records.branches),c.log.debug("in mergeBranch");},"merge"),v=(0,c.__name)(function(e){let t=e.id,r=e.targetId,a=e.tags,o=e.parent;c.log.debug("Entering cherryPick:",t,r,a);let i=h();if(t=n.common_default.sanitizeText(t,i),r=n.common_default.sanitizeText(r,i),a=null==a?void 0:a.map(e=>n.common_default.sanitizeText(e,i)),o=n.common_default.sanitizeText(o,i),!t||!$.records.commits.has(t)){let e=Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw e.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},e;}let s=$.records.commits.get(t);if(void 0===s||!s)throw Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(o&&!(Array.isArray(s.parents)&&s.parents.includes(o)))throw Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");let l=s.branch;if(s.type===d.MERGE&&!o)throw Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!$.records.commits.has(r)){if(l===$.records.currBranch){let e=Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw e.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},e;}let e=$.records.branches.get($.records.currBranch);if(void 0===e||!e){let e=Error(`Incorrect usage of "cherry-pick". Current branch (${$.records.currBranch})has no commits`);throw e.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},e;}let i=$.records.commits.get(e);if(void 0===i||!i){let e=Error(`Incorrect usage of "cherry-pick". Current branch (${$.records.currBranch})has no commits`);throw e.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},e;}let n={id:$.records.seq+"-"+g(),message:`cherry-picked ${null==s?void 0:s.message} into ${$.records.currBranch}`,seq:$.records.seq++,parents:null==$.records.head?[]:[$.records.head.id,s.id],branch:$.records.currBranch,type:d.CHERRY_PICK,tags:a?a.filter(Boolean):[`cherry-pick:${s.id}${s.type===d.MERGE?`|parent:${o}`:""}`]};$.records.head=n,$.records.commits.set(n.id,n),$.records.branches.set($.records.currBranch,n.id),c.log.debug($.records.branches),c.log.debug("in cherryPick");}},"cherryPick"),w=(0,c.__name)(function(e){if(e=n.common_default.sanitizeText(e,h()),$.records.branches.has(e)){$.records.currBranch=e;let t=$.records.branches.get($.records.currBranch);void 0!==t&&t?$.records.head=$.records.commits.get(t)??null:$.records.head=null;}else{let t=Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${e}")`);throw t.hash={text:`checkout ${e}`,token:`checkout ${e}`,expected:[`branch ${e}`]},t;}},"checkout");function B(e,t,r){let a=e.indexOf(t);-1===a?e.push(r):e.splice(a,1,r);}function E(e){let t=e.reduce((e,t)=>e.seq>t.seq?e:t,e[0]),r="";e.forEach(function(e){e===t?r+="	*":r+="	|";});let a=[r,t.id,t.seq];for(let e in $.records.branches)$.records.branches.get(e)===t.id&&a.push(e);if(c.log.debug(a.join(" ")),t.parents&&2==t.parents.length&&t.parents[0]&&t.parents[1]){let r=$.records.commits.get(t.parents[0]);B(e,t,r),t.parents[1]&&e.push($.records.commits.get(t.parents[1]));}else if(0==t.parents.length)return;else if(t.parents[0]){let r=$.records.commits.get(t.parents[0]);B(e,t,r);}E(e=y(e,e=>e.id));}(0,c.__name)(B,"upsert"),(0,c.__name)(E,"prettyPrintCommitHistory");var C=(0,c.__name)(function(){c.log.debug($.records.commits),E([R()[0]]);},"prettyPrint"),T=(0,c.__name)(function(){$.reset(),(0,n.clear)();},"clear"),k=(0,c.__name)(function(){return[...$.records.branchConfig.values()].map((e,t)=>null!==e.order&&void 0!==e.order?e:{...e,order:parseFloat(`0.${t}`)}).sort((e,t)=>(e.order??0)-(t.order??0)).map(({name:e})=>({name:e}));},"getBranchesAsObjArray"),L=(0,c.__name)(function(){return $.records.branches;},"getBranches"),M=(0,c.__name)(function(){return $.records.commits;},"getCommits"),R=(0,c.__name)(function(){let e=[...$.records.commits.values()];return e.forEach(function(e){c.log.debug(e.id);}),e.sort((e,t)=>e.seq-t.seq),e;},"getCommitsArray"),P={commitType:d,getConfig:h,setDirection:u,setOptions:p,getOptions:f,commit:x,branch:b,merge:_,cherryPick:v,checkout:w,prettyPrint:C,clear:T,getBranchesAsObjArray:k,getBranches:L,getCommits:M,getCommitsArray:R,getCurrentBranch:(0,c.__name)(function(){return $.records.currBranch;},"getCurrentBranch"),getDirection:(0,c.__name)(function(){return $.records.direction;},"getDirection"),getHead:(0,c.__name)(function(){return $.records.head;},"getHead"),setAccTitle:n.setAccTitle,getAccTitle:n.getAccTitle,getAccDescription:n.getAccDescription,setAccDescription:n.setAccDescription,setDiagramTitle:n.setDiagramTitle,getDiagramTitle:n.getDiagramTitle},A=(0,c.__name)((e,t)=>{for(let r of((0,a.populateCommonDb)(e,t),e.dir&&t.setDirection(e.dir),e.statements))I(r,t);},"populate"),I=(0,c.__name)((e,t)=>{let r={Commit:(0,c.__name)(e=>t.commit(G(e)),"Commit"),Branch:(0,c.__name)(e=>t.branch(O(e)),"Branch"),Merge:(0,c.__name)(e=>t.merge(q(e)),"Merge"),Checkout:(0,c.__name)(e=>t.checkout(H(e)),"Checkout"),CherryPicking:(0,c.__name)(e=>t.cherryPick(z(e)),"CherryPicking")}[e.$type];r?r(e):c.log.error(`Unknown statement type: ${e.$type}`);},"parseStatement"),G=(0,c.__name)(e=>({id:e.id,msg:e.message??"",type:void 0!==e.type?d[e.type]:d.NORMAL,tags:e.tags??void 0}),"parseCommit"),O=(0,c.__name)(e=>({name:e.name,order:e.order??0}),"parseBranch"),q=(0,c.__name)(e=>({branch:e.branch,id:e.id??"",type:void 0!==e.type?d[e.type]:void 0,tags:e.tags??void 0}),"parseMerge"),H=(0,c.__name)(e=>e.branch,"parseCheckout"),z=(0,c.__name)(e=>{var t;return{id:e.id,targetId:"",tags:(null===(t=e.tags)||void 0===t?void 0:t.length)===0?void 0:e.tags,parent:e.parent};},"parseCherryPicking"),D={parse:(0,c.__name)(async e=>{let t=await (0,s.parse)("gitGraph",e);c.log.debug(t),A(t,P);},"parse")},S=(0,n.getConfig2)(),N=null==S?void 0:S.gitGraph,W=new Map,j=new Map,F=new Map,K=[],Y=0,V="LR",U=(0,c.__name)(()=>{W.clear(),j.clear(),F.clear(),Y=0,K=[],V="LR";},"clear"),J=(0,c.__name)(e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof e?e.split(/\\n|\n|<br\s*\/?>/gi):e).forEach(e=>{let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r);}),t;},"drawText"),Q=(0,c.__name)(e=>{let t,r,a;return"BT"===V?(r=(0,c.__name)((e,t)=>e<=t,"comparisonFunc"),a=1/0):(r=(0,c.__name)((e,t)=>e>=t,"comparisonFunc"),a=0),e.forEach(e=>{var o,i;let n="TB"===V||"BT"==V?null===(o=j.get(e))||void 0===o?void 0:o.y:null===(i=j.get(e))||void 0===i?void 0:i.x;void 0!==n&&r(n,a)&&(t=e,a=n);}),t;},"findClosestParent"),X=(0,c.__name)(e=>{let t="",r=1/0;return e.forEach(e=>{let a=j.get(e).y;a<=r&&(t=e,r=a);}),t||void 0;},"findClosestParentBT"),Z=(0,c.__name)((e,t,r)=>{let a=r,o=r,i=[];e.forEach(e=>{let r=t.get(e);if(!r)throw Error(`Commit not found for key ${e}`);r.parents.length?o=Math.max(a=et(r),o):i.push(r),er(r,a);}),a=o,i.forEach(e=>{ea(e,a,r);}),e.forEach(e=>{let r=t.get(e);if(null==r?void 0:r.parents.length){let e=X(r.parents);(a=j.get(e).y-40)<=o&&(o=a);let t=W.get(r.branch).pos,i=a-10;j.set(r.id,{x:t,y:i});}});},"setParallelBTPos"),ee=(0,c.__name)(e=>{var t;let r=Q(e.parents.filter(e=>null!==e));if(!r)throw Error(`Closest parent not found for commit ${e.id}`);let a=null===(t=j.get(r))||void 0===t?void 0:t.y;if(void 0===a)throw Error(`Closest parent position not found for commit ${e.id}`);return a;},"findClosestParentPos"),et=(0,c.__name)(e=>ee(e)+40,"calculateCommitPosition"),er=(0,c.__name)((e,t)=>{let r=W.get(e.branch);if(!r)throw Error(`Branch not found for commit ${e.id}`);let a=r.pos,o=t+10;return j.set(e.id,{x:a,y:o}),{x:a,y:o};},"setCommitPosition"),ea=(0,c.__name)((e,t,r)=>{let a=W.get(e.branch);if(!a)throw Error(`Branch not found for commit ${e.id}`);let o=a.pos;j.set(e.id,{x:o,y:t+r});},"setRootPosition"),eo=(0,c.__name)((e,t,r,a,o,i)=>{if(i===d.HIGHLIGHT)e.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${t.id} commit-highlight${o%8} ${a}-outer`),e.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${t.id} commit${o%8} ${a}-inner`);else if(i===d.CHERRY_PICK)e.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${t.id} ${a}`),e.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${a}`),e.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${a}`),e.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${a}`),e.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${a}`);else{let n=e.append("circle");if(n.attr("cx",r.x),n.attr("cy",r.y),n.attr("r",t.type===d.MERGE?9:10),n.attr("class",`commit ${t.id} commit${o%8}`),i===d.MERGE){let i=e.append("circle");i.attr("cx",r.x),i.attr("cy",r.y),i.attr("r",6),i.attr("class",`commit ${a} ${t.id} commit${o%8}`);}i===d.REVERSE&&e.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${a} ${t.id} commit${o%8}`);}},"drawCommitBullet"),ei=(0,c.__name)((e,t,r,a)=>{if(t.type!==d.CHERRY_PICK&&(t.customId&&t.type===d.MERGE||t.type!==d.MERGE)&&(null==N?void 0:N.showCommitLabel)){var o;let i=e.append("g"),n=i.insert("rect").attr("class","commit-label-bkg"),c=i.append("text").attr("x",a).attr("y",r.y+25).attr("class","commit-label").text(t.id),s=null===(o=c.node())||void 0===o?void 0:o.getBBox();if(s&&(n.attr("x",r.posWithOffset-s.width/2-2).attr("y",r.y+13.5).attr("width",s.width+4).attr("height",s.height+4),"TB"===V||"BT"===V?(n.attr("x",r.x-(s.width+16+5)).attr("y",r.y-12),c.attr("x",r.x-(s.width+16)).attr("y",r.y+s.height-12)):c.attr("x",r.posWithOffset-s.width/2),N.rotateCommitLabel)){if("TB"===V||"BT"===V)c.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),n.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{let e=-7.5-(s.width+10)/25*9.5,t=10+s.width/25*8.5;i.attr("transform","translate("+e+", "+t+") rotate(-45, "+a+", "+r.y+")");}}}},"drawCommitLabel"),en=(0,c.__name)((e,t,r,a)=>{if(t.tags.length>0){let i=0,n=0,c=0,s=[];for(let a of t.tags.reverse()){var o;let t=e.insert("polygon"),l=e.append("circle"),d=e.append("text").attr("y",r.y-16-i).attr("class","tag-label").text(a),m=null===(o=d.node())||void 0===o?void 0:o.getBBox();if(!m)throw Error("Tag bbox not found");n=Math.max(n,m.width),c=Math.max(c,m.height),d.attr("x",r.posWithOffset-m.width/2),s.push({tag:d,hole:l,rect:t,yOffset:i}),i+=20;}for(let{tag:e,hole:t,rect:o,yOffset:i}of s){let s=c/2,l=r.y-19.2-i;if(o.attr("class","tag-label-bkg").attr("points",`
      ${a-n/2-2},${l+2}  
      ${a-n/2-2},${l-2}
      ${r.posWithOffset-n/2-4},${l-s-2}
      ${r.posWithOffset+n/2+4},${l-s-2}
      ${r.posWithOffset+n/2+4},${l+s+2}
      ${r.posWithOffset-n/2-4},${l+s+2}`),t.attr("cy",l).attr("cx",a-n/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===V||"BT"===V){let c=a+i;o.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${c+2}
        ${r.x},${c-2}
        ${r.x+10},${c-s-2}
        ${r.x+10+n+4},${c-s-2}
        ${r.x+10+n+4},${c+s+2}
        ${r.x+10},${c+s+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),t.attr("cx",r.x+2).attr("cy",c).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),e.attr("x",r.x+5).attr("y",c+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+a+")");}}}},"drawCommitTags"),ec=(0,c.__name)(e=>{switch(e.customType??e.type){case d.NORMAL:return"commit-normal";case d.REVERSE:return"commit-reverse";case d.HIGHLIGHT:return"commit-highlight";case d.MERGE:return"commit-merge";case d.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal";}},"getCommitClassType"),es=(0,c.__name)((e,t,r,a)=>{let o={x:0,y:0};if(e.parents.length>0){let r=Q(e.parents);if(r){let i=a.get(r)??o;return"TB"===t?i.y+40:"BT"===t?(a.get(e.id)??o).y-40:i.x+40;}}else{if("TB"===t)return 30;if("BT"===t)return(a.get(e.id)??o).y-40;}return 0;},"calculatePosition"),el=(0,c.__name)((e,t,r)=>{var a,o;let i="BT"===V&&r?t:t+10,n="TB"===V||"BT"===V?i:null===(a=W.get(e.branch))||void 0===a?void 0:a.pos,c="TB"===V||"BT"===V?null===(o=W.get(e.branch))||void 0===o?void 0:o.pos:i;if(void 0===c||void 0===n)throw Error(`Position were undefined for commit ${e.id}`);return{x:c,y:n,posWithOffset:i};},"getCommitPosition"),ed=(0,c.__name)((e,t,r)=>{if(!N)throw Error("GitGraph config not found");let a=e.append("g").attr("class","commit-bullets"),o=e.append("g").attr("class","commit-labels"),i="TB"===V||"BT"===V?30:0,n=[...t.keys()],s=(null==N?void 0:N.parallelCommits)??!1,l=n.sort((0,c.__name)((e,r)=>{var a,o;let i=null===(a=t.get(e))||void 0===a?void 0:a.seq,n=null===(o=t.get(r))||void 0===o?void 0:o.seq;return void 0!==i&&void 0!==n?i-n:0;},"sortKeys"));"BT"===V&&(s&&Z(l,t,i),l=l.reverse()),l.forEach(e=>{let n=t.get(e);if(!n)throw Error(`Commit not found for key ${e}`);s&&(i=es(n,V,i,j));let c=el(n,i,s);if(r){var l;let e=ec(n),t=n.customType??n.type,r=(null===(l=W.get(n.branch))||void 0===l?void 0:l.index)??0;eo(a,n,c,e,r,t),ei(o,n,c,i),en(o,n,c,i);}"TB"===V||"BT"===V?j.set(n.id,{x:c.x,y:c.posWithOffset}):j.set(n.id,{x:c.posWithOffset,y:c.y}),(i="BT"===V&&s?i+40:i+40+10)>Y&&(Y=i);});},"drawCommits"),em=(0,c.__name)((e,t,r,a,o)=>{let i=("TB"===V||"BT"===V?r.x<a.x:r.y<a.y)?t.branch:e.branch,n=(0,c.__name)(e=>e.branch===i,"isOnBranchToGetCurve"),s=(0,c.__name)(r=>r.seq>e.seq&&r.seq<t.seq,"isBetweenCommits");return[...o.values()].some(e=>s(e)&&n(e));},"shouldRerouteArrow"),eh=(0,c.__name)((e,t,r=0)=>{let a=e+Math.abs(e-t)/2;if(r>5)return a;if(K.every(e=>Math.abs(e-a)>=10))return K.push(a),a;let o=Math.abs(e-t);return eh(e,t-o/5,r+1);},"findLane"),e$=(0,c.__name)((e,t,r,a)=>{var o,i,n,c,s;let l;let m=j.get(t.id),h=j.get(r.id);if(void 0===m||void 0===h)throw Error(`Commit positions not found for commits ${t.id} and ${r.id}`);let $=em(t,r,m,h,a),g="",y="",u=0,p=0,f=null===(o=W.get(r.branch))||void 0===o?void 0:o.index;if(r.type===d.MERGE&&t.id!==r.parents[0]&&(f=null===(i=W.get(t.branch))||void 0===i?void 0:i.index),$){g="A 10 10, 0, 0, 0,",y="A 10 10, 0, 0, 1,",u=10,p=10;let e=m.y<h.y?eh(m.y,h.y):eh(h.y,m.y),r=m.x<h.x?eh(m.x,h.x):eh(h.x,m.x);"TB"===V?m.x<h.x?l=`M ${m.x} ${m.y} L ${r-u} ${m.y} ${y} ${r} ${m.y+p} L ${r} ${h.y-u} ${g} ${r+p} ${h.y} L ${h.x} ${h.y}`:(f=null===(n=W.get(t.branch))||void 0===n?void 0:n.index,l=`M ${m.x} ${m.y} L ${r+u} ${m.y} ${g} ${r} ${m.y+p} L ${r} ${h.y-u} ${y} ${r-p} ${h.y} L ${h.x} ${h.y}`):"BT"===V?m.x<h.x?l=`M ${m.x} ${m.y} L ${r-u} ${m.y} ${g} ${r} ${m.y-p} L ${r} ${h.y+u} ${y} ${r+p} ${h.y} L ${h.x} ${h.y}`:(f=null===(c=W.get(t.branch))||void 0===c?void 0:c.index,l=`M ${m.x} ${m.y} L ${r+u} ${m.y} ${y} ${r} ${m.y-p} L ${r} ${h.y+u} ${g} ${r-p} ${h.y} L ${h.x} ${h.y}`):m.y<h.y?l=`M ${m.x} ${m.y} L ${m.x} ${e-u} ${g} ${m.x+p} ${e} L ${h.x-u} ${e} ${y} ${h.x} ${e+p} L ${h.x} ${h.y}`:(f=null===(s=W.get(t.branch))||void 0===s?void 0:s.index,l=`M ${m.x} ${m.y} L ${m.x} ${e+u} ${y} ${m.x+p} ${e} L ${h.x-u} ${e} ${g} ${h.x} ${e-p} L ${h.x} ${h.y}`);}else g="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",u=20,p=20,"TB"===V?(m.x<h.x&&(l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${m.x} ${h.y-u} ${g} ${m.x+p} ${h.y} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${h.x-u} ${m.y} ${y} ${h.x} ${m.y+p} L ${h.x} ${h.y}`),m.x>h.x&&(g="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",u=20,p=20,l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${m.x} ${h.y-u} ${y} ${m.x-p} ${h.y} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${h.x+u} ${m.y} ${g} ${h.x} ${m.y+p} L ${h.x} ${h.y}`),m.x===h.x&&(l=`M ${m.x} ${m.y} L ${h.x} ${h.y}`)):"BT"===V?(m.x<h.x&&(l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${m.x} ${h.y+u} ${y} ${m.x+p} ${h.y} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${h.x-u} ${m.y} ${g} ${h.x} ${m.y-p} L ${h.x} ${h.y}`),m.x>h.x&&(g="A 20 20, 0, 0, 0,",y="A 20 20, 0, 0, 1,",u=20,p=20,l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${m.x} ${h.y+u} ${g} ${m.x-p} ${h.y} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${h.x-u} ${m.y} ${g} ${h.x} ${m.y-p} L ${h.x} ${h.y}`),m.x===h.x&&(l=`M ${m.x} ${m.y} L ${h.x} ${h.y}`)):(m.y<h.y&&(l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${h.x-u} ${m.y} ${y} ${h.x} ${m.y+p} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${m.x} ${h.y-u} ${g} ${m.x+p} ${h.y} L ${h.x} ${h.y}`),m.y>h.y&&(l=r.type===d.MERGE&&t.id!==r.parents[0]?`M ${m.x} ${m.y} L ${h.x-u} ${m.y} ${g} ${h.x} ${m.y-p} L ${h.x} ${h.y}`:`M ${m.x} ${m.y} L ${m.x} ${h.y+u} ${y} ${m.x+p} ${h.y} L ${h.x} ${h.y}`),m.y===h.y&&(l=`M ${m.x} ${m.y} L ${h.x} ${h.y}`));if(void 0===l)throw Error("Line definition not found");e.append("path").attr("d",l).attr("class","arrow arrow"+f%8);},"drawArrow"),eg=(0,c.__name)((e,t)=>{let r=e.append("g").attr("class","commit-arrows");[...t.keys()].forEach(e=>{let a=t.get(e);a.parents&&a.parents.length>0&&a.parents.forEach(e=>{e$(r,t.get(e),a,t);});});},"drawArrows"),ey=(0,c.__name)((e,t)=>{let r=e.append("g");t.forEach((e,t)=>{var a;let o=t%8,i=null===(a=W.get(e.name))||void 0===a?void 0:a.pos;if(void 0===i)throw Error(`Position not found for branch ${e.name}`);let n=r.append("line");n.attr("x1",0),n.attr("y1",i),n.attr("x2",Y),n.attr("y2",i),n.attr("class","branch branch"+o),"TB"===V?(n.attr("y1",30),n.attr("x1",i),n.attr("y2",Y),n.attr("x2",i)):"BT"===V&&(n.attr("y1",Y),n.attr("x1",i),n.attr("y2",30),n.attr("x2",i)),K.push(i);let c=J(e.name),s=r.insert("rect"),l=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+o);l.node().appendChild(c);let d=c.getBBox();s.attr("class","branchLabelBkg label"+o).attr("rx",4).attr("ry",4).attr("x",-d.width-4-((null==N?void 0:N.rotateCommitLabel)===!0?30:0)).attr("y",-d.height/2+8).attr("width",d.width+18).attr("height",d.height+4),l.attr("transform","translate("+(-d.width-14-((null==N?void 0:N.rotateCommitLabel)===!0?30:0))+", "+(i-d.height/2-1)+")"),"TB"===V?(s.attr("x",i-d.width/2-10).attr("y",0),l.attr("transform","translate("+(i-d.width/2-5)+", 0)")):"BT"===V?(s.attr("x",i-d.width/2-10).attr("y",Y),l.attr("transform","translate("+(i-d.width/2-5)+", "+Y+")")):s.attr("transform","translate(-19, "+(i-d.height/2)+")");});},"drawBranches"),eu=(0,c.__name)(function(e,t,r,a,o){return W.set(e,{pos:t,index:r}),t+=50+(o?40:0)+("TB"===V||"BT"===V?a.width/2:0);},"setBranchPosition"),ep={parser:D,db:P,renderer:{draw:(0,c.__name)(function(e,t,r,a){if(U(),c.log.debug("in gitgraph renderer",e+"\n","id:",t,r),!N)throw Error("GitGraph config not found");let o=N.rotateCommitLabel??!1,s=a.db;F=s.getCommits();let d=s.getBranchesAsObjArray();V=s.getDirection();let m=(0,l.select)(`[id="${t}"]`),h=0;d.forEach((e,t)=>{var r;let a=J(e.name),i=m.append("g"),n=i.insert("g").attr("class","branchLabel"),c=n.insert("g").attr("class","label branch-label");null===(r=c.node())||void 0===r||r.appendChild(a);let s=a.getBBox();h=eu(e.name,h,t,s,o),c.remove(),n.remove(),i.remove();}),ed(m,F,!1),N.showBranches&&ey(m,d),eg(m,F),ed(m,F,!0),i.utils_default.insertTitle(m,"gitTitleText",N.titleTopMargin??0,s.getDiagramTitle()),(0,n.setupGraphViewbox2)(void 0,m,N.diagramPadding,N.useMaxWidth);},"draw")},styles:(0,c.__name)(e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join("\n")}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles")};}}]);